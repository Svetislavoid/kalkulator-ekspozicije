<!DOCTYPE html>

<html>

  <head>
    <meta charset="UTF-8" />
      <title>Exposure time calculator</title>
      <link rel="stylesheet" type="text/css" href="build/main.css">
      <script type="text/javascript" src="build/main.js"></script>
  </head>

  <body>

    <div class="screenShade"></div>
    <div class="wrapper">

      <div class="logos">
        <a href="http://www.matf.bg.ac.rs/" target="_blank">
          <img
            class="logo matf-logo"
            src="img/matf.gif"
            title="University of Belgrade, Faculty of Mathematics">
          </img>
        </a>
        <a href="http://aob.rs/" target="_blank">
          <img
            class="logo aob-logo"
            src="img/AobColor.png"
            title="Astronomical Observatory of Belgrade">
          </img>
        </a>
      </div>

      <div class="modal">
        <div class="telescopeParams">
          <label for="telescopeDiameter">Telescope diameter (m):</label>
          <input class="telescopeDiameter" type="text">
          <label for="telescopeFocalLength">Telescope focal length (m):</label>
          <input class="telescopeFocalLength" type="text">
          <label for="telescopeEffectiveAreaCoef">Effective area of main mirror (%):</label>
          <input class="telescopeEffectiveAreaCoef" type="text">
        </div>
        <div class="reducerParams">
          <label for="reducerValue">Reducer:</label>
          <input class="reducerValue" type="text">
        </div>
        <div class="ccdParams">
          <label for="ccdRO">CCD read-out noise (e<sup>-</sup>/pix):</label>
          <input class="ccdRO" type="text">
          <label for="ccdDC">CCD dark current (e<sup>-</sup>/s/pix):</label>
          <input class="ccdDC" type="text">
          <label for="ccdPixelSize">CCD pixel size (&#181;m):</label>
          <input class="ccdPixelSize" type="text">
          <label for="ccdQE">CCD quantum efficiency (%):</label>
          <input class="ccdQE" type="text">
        </div>
        <div class="binningParams">
          <label for="binningValue">Binning:</label>
          <input class="binningValue" type="text">
        </div>
        <div class="filterParams">
          <label for="bandWavelength">Filter mean wavelength (&#8491;):</label>
          <input class="bandWavelength" type="text">
          <label for="bandBandwidth">Filter bandwidth (&#8491;):</label>
          <input class="bandBandwidth" type="text">
          <label for="bandFlux">Zero magnitude flux (photon/s/cm<sup>2</sup>/&#8491;):</label>
          <input class="bandFlux" type="text">
          <label for="extinctionCoeff">Extinction coefficient (mag/airmass):</label>
          <input class="extinctionCoeff" type="text">
        </div>
        <input type="button" class="btn modalSubmit" value="Ok">
      </div>

      <form>
        <fieldset>
          <legend>Exposure time calculator</legend>

          <div class="form">
            <div class="parameters">
              <label for="object">Object:</label>
              <select class="object" name="object">
                <option value="point">Point</option>
                <option value="extended">Extended</option>
              </select>
            </div>

            <div class="parameters">
              <label for="teleskop">Telescope:</label>
              <select class="teleskop" name="teleskop">
                <option value="cassegrain">60cm Cassegrain</option>
                <option value="nasmyth">1.4m Milankovic</option>
                <option value="custom" class="customTelescope">Custom telescope</option>
              </select>
            </div>

            <div class="parameters">
              <label for="reducer">Reducer:</label>
              <select class="reducer" name="reducer">
                <option value="1">none</option>
                <option value="0.64">0.64x</option>
                <option value="0.5">0.5x</option>
                <option value="custom" class="customReducer">Custom reducer</option>
              </select>
            </div>

            <div class="parameters">
              <label for="ccd">CCD:</label>
              <select class="ccd" name="ccd">
                <option value="iXon897">ANDOR iXon 897</option>
                <option value="iKonL936">Andor iKon-L 936</option>
                <option value="sbigstxl6303e">SBIG STXL-6303E</option>
                <option value="ProLinePL23042">ProLine PL23042</option>
                <option value="custom" class="customCCD">Custom CCD</option>
              </select>
            </div>

            <div class="parameters">
              <label for="binning">CCD binning:</label>
              <select class="binning" name="binning">
                <option value="1">1x1</option>
                <option value="2">2x2</option>
                <option value="3">3x3</option>
                <option value="4">4x4</option>
                <option value="5">5x5</option>
                <option value="custom" class="customBinning">Custom binning</option>
              </select>
            </div>

            <div class="parameters">
              <label for="filter">Band:</label>
              <select class="filter" name="filter">
                <option value="B">B (4450 &#8491;)</option>
                <option value="V">V (5510 &#8491;)</option>
                <option value="R">R (6580 &#8491;)</option>
                <option value="I">I (8060 &#8491;)</option>
                <option value="L">L (35000 &#8491;)</option>
                <option value="Ha">H<sub>&alpha;</sub> (6563 &#8491;)</option>
                <option value="Red-continuum">Red-continuum (6452 &#8491;)</option>
                <option value="[SII]">[SII] (6716 &#8491;)</option>
                <option value="G">G (4770 &#8491;)</option>
                <option value="R">R (6231 &#8491;)</option>
                <option value="I">I (7625 &#8491;)</option>
                <option value="ZS">ZS (8930 &#8491;)</option>
                <option value="Y">Y (10200 &#8491;)</option>
                <option value="custom" class="customBand">Custom band</option>
              </select>
            </div>

            <div class="parameters">
              <label for="transparentnost">Total transparency on all optical elements:</label>
              <input class="transparentnost" type="text">
            </div>

            <div class="parameters">
              <label for="airmass">Airmass:</label>
              <input class="airmass" type="text">
            </div>

            <div class="parameters">
              <label for="sjaj-neba">Sky brightness (mag/arcsec<sup>2</sup>):</label>
              <input class="sjaj-neba" type="text" value="19">
            </div>

            <div class="parameters">
              <label for="seeing">Seeing (FWHM in arcsec):</label>
              <input class="seeing" type="text">
            </div>

            <div class="parameters">
              <label for="aperture">Radius for photometry (arcsec):</label>
              <input class="aperture" type="text">
            </div>

            <div class="parameters">
              <label for="magnituda">Magnitude:</label>
              <input class="magnituda" type="text">
            </div>

            <div class="parameters">
              <label for="signal-to-noise">S/N:</label>
              <input class="signal-to-noise" type="text">
            </div>

            <input type="button" class="btn submit" value="Calculate">
          </div>

          <div class="result hidden">

            <section>
              <p>Object: <span class="r-object bold"></span></p>
              <p>Telescope: <span class="r-teleskop bold"></span></p>
              <p>Reducer: <span class="r-reducer bold"></span></p>
              <p>CCD: <span class="r-ccd bold"></span></p>
              <p>CCD binning: <span class="r-binning bold"></span></p>
              <p>Band: <span class="r-filter bold"></span></p>
              <p>Total transparency on all optical elements: <span class="r-transparentnost bold"></span></p>
              <p>Airmass: <span class="r-airmass bold"></span></p>
              <p>Sky brightness (mag/arcsec<sup>2</sup>): <span class="r-sjaj-neba bold"></span></p>
              <p>Seeing (FWHM in arcsec): <span class="r-seeing bold"></span></p>
              <p>Radius for photometry (arcsec): <span class="r-aperture bold"></span></p>
              <p>Magnitude: <span class="r-magnituda bold"></span></p>
              <p>S/N: <span class="r-signal-to-noise bold"></span></p>
              <p>Signal from the object: <span class="s_sig bold">0</span> e<sup>-</sup>/s</p>
              <p>Signal from the sky: <span class="s_sky bold">0</span> e<sup>-</sup>/s/pix</p>
              <p>Dark current: <span class="s_dc bold">0</span> e<sup>-</sup>/s/pix</p>
              <p>Read out noise: <span class="s_ro bold">0</span> e<sup>-</sup>/pix</p>
              <p>Number of pixels: <span class="n_pix bold">0</span> pix</p>
              <p class="ekspozicija bold">Exposure time: <span>0</span></p>
              <p class="showGraph">
                <input type="checkbox" id="showGraph" name="showGraph">
                <label for="showGraph">Show graph</label>
              </p>
            </section>

            <canvas id="canvas" class="collapsed" width="550" height="400"></canvas>

            <input type="button" class="btn back" value="Back">

          </div>

        </fieldset>

      </form>

      <a href="#help" name="help" class="helpButton">Help</a>

      <div class="help collapsed">

        <h4>About the calculator</h4>

        <p>This calculator is made primarily for planning observations at the <a href="http://vidojevica.aob.rs/" target="_blank"> Astronomical Station Vidojevica</a> <a href="http://aob.rs/" target="_blank">(Astronomical Observatory of Belgrade)</a>. By filling up the form and clicking on the 'Calculate' button, exposure time needed in order to achive wanted signal-to-noise ratio (S/N) is calculated. If, for the given parameters, exposure time is calculated to be less than 0.01s, calculator will not show any result and the graph will not be drawn.</p>

        <h4>How to use</h4>

        <p>In the form, instruments currently available at the AS Vidojevica can be chosen. Total throughput over all reflective and refractive optical surfaces in the telescope along with the transmission of the chosen filter should be calculated separately and entered in the 'Total transparency' field. The atmosphere transmission coefficient should also be calculated independently of the calculator and entered in the 'Sky transparency' field.</p>
        <p>Calculator can also be used with some custom instruments and options, and not only those listed in the dropdown menus. In order to do that, choose 'Custom' option from the dropdown menu. Pop-up window will appear asking for custom instrument parameters.</p>
        <p>When using custom telescope, telescope effective area can be omitted, in which case a default value of 100% will be used.</p>
        <p>When using custom CCD, to get the best results enter quantum efficiency of the CCD at the wavelength that corresponds to the mean wavelength of a filter that is going to be used.</p>

        <h4>Calculations</h4>

        <p>Calculator uses the following equation to calculate signal-to-noise ratio (SNR):</p>

        <img src="img/snr.png">

        <p>From this equation we get an expression for exposure time:</p>

        <img src="img/exposure.png">

        <p>where S<sub>dc</sub> and S<sub>ro</sub> are camera dark current and read out noise values, respectively.</p>

        <p>Counts from the object, counts from the sky and number of pixels in the aperture are calculated as:</p>

        <img src="img/objectSignal.png">
        <img src="img/skySignal.png">
        <img src="img/pixelNo.png">

        <p>where</p>

        <img src="img/scale.png">

        <p>is camera resolution.</p>

      </div>

    </div>

  </body>

</html>
